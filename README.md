# مصمم الهويات - Identity Maker

## 🎯 نظرة عامة

مصمم الهويات هو تطبيق ويب متقدم لتصميم وإنشاء بطاقات الهوية والبطاقات التعريفية باستخدام أحدث التقنيات. يوفر التطبيق واجهة سهلة الاستخدام مع أدوات تصميم احترافية.

## ✨ الميزات الرئيسية

### 🎨 أدوات التصميم
- **إضافة العناصر**: نصوص، مربعات، دوائر، مثلثات، وصور
- **التحرير المتقدم**: سحب وإفلات، تغيير الحجم، والدوران
- **لوحة الخصائص**: تحكم دقيق في جميع خصائص العناصر
- **نظام الطبقات**: ترتيب العناصر وإدارة عمق الطبقات

### 🖼️ إدارة القماش
- **أحجام متعددة**: بطاقة ماستركارد، هوية مدرسية، بطاقة أعمال، وأحجام مخصصة
- **الاتجاهات**: دعم للاتجاه الأفقي والعمودي
- **الشبكة**: نظام شبكة قابل للتخصيص مع خيار المحاذاة
- **خلفية قابلة للتخصيص**: اختيار ألوان الخلفية

### 💾 إدارة المشاريع
- **الحفظ والاستيراد**: حفظ المشاريع بصيغة JSON وإعادة فتحها
- **التراجع والإعادة**: نظام تاريخ متقدم للتراجع والإعادة
- **النسخ واللصق**: نسخ وتكرار العناصر

### 📤 التصدير
- **صيغ متعددة**: PNG، JPG، وPDF
- **جودة عالية**: تحكم في دقة ومقياس التصدير
- **تحسين تلقائي**: إعدادات تصدير محسنة تلقائياً

## 🛠️ التقنيات المستخدمة

### Frontend Framework
- **Next.js 14**: مع App Router للتوجيه المتقدم
- **React 18**: مع أحدث الميزات والخطافات
- **TypeScript**: للتطوير الآمن ومنع الأخطاء

### التصميم والواجهة
- **TailwindCSS**: للتصميم السريع والمتجاوب
- **Lucide React**: مكتبة أيقونات حديثة ومرنة
- **دعم اللغة العربية**: تخطيط RTL كامل

### إدارة الحالة والبيانات
- **Zustand**: إدارة حالة بسيطة وقوية
- **Immer**: للتحديثات المعقدة للحالة
- **Middleware**: نظام تاريخ متقدم

### Canvas والرسم
- **Konva.js**: محرك رسم 2D قوي ومرن
- **React-Konva**: تكامل Konva مع React
- **أدوات التحكم**: محولات وأدوات تفاعلية

### اختيار الألوان والتصدير
- **React Color**: منتقي ألوان متقدم
- **html-to-image**: تحويل DOM إلى صور
- **jsPDF**: إنشاء ملفات PDF عالية الجودة

### جودة الكود
- **ESLint**: تحليل وفحص الكود
- **Prettier**: تنسيق الكود التلقائي
- **TypeScript**: فحص الأنواع والأخطاء

## 🏗️ هيكلية المشروع

```
src/
├── app/                    # صفحات Next.js 14
│   ├── page.tsx           # الصفحة الرئيسية
│   ├── editor/            # صفحة المحرر
│   ├── globals.css        # تنسيقات عامة
│   └── layout.tsx         # تخطيط التطبيق
├── components/            # مكونات React
│   └── editor/           # مكونات المحرر
│       ├── CanvasStage.tsx    # منطقة الرسم
│       ├── Toolbar.tsx        # شريط الأدوات
│       ├── PropertiesPanel.tsx # لوحة الخصائص
│       └── Grid.tsx           # نظام الشبكة
├── lib/                   # دوال مساعدة
│   ├── konvaUtils.ts     # أدوات Konva
│   └── exportUtils.ts    # أدوات التصدير
├── store/                 # إدارة الحالة
│   └── useEditorStore.ts # متجر Zustand
└── types/                 # تعريفات TypeScript
    └── shapes.d.ts       # أنواع الأشكال
```

## 🚀 التثبيت والتشغيل

### المتطلبات
- Node.js 18+ 
- npm أو yarn أو pnpm

### خطوات التثبيت

1. **استنساخ المشروع**
```bash
git clone [repository-url]
cd identity_maker_next_js
```

2. **تثبيت التبعيات**
```bash
npm install
```

3. **تشغيل المشروع في وضع التطوير**
```bash
npm run dev
```

4. **فتح التطبيق**
```
http://localhost:3000
```

### البناء للإنتاج

```bash
# بناء التطبيق
npm run build

# تشغيل النسخة المبنية
npm start
```

## 📖 كيفية الاستخدام

### البدء السريع
1. افتح التطبيق واذهب إلى الصفحة الرئيسية
2. انقر على "ابدأ التصميم الآن"
3. استخدم شريط الأدوات لإضافة العناصر
4. اختر العنصر لتعديل خصائصه في اللوحة الجانبية
5. صدّر تصميمك بالصيغة المرغوبة

### أحجام البطاقات المدعومة
- **بطاقة ماستركارد**: 85.60 × 53.98 ملم
- **هوية مدرسية**: 90 × 56 ملم  
- **بطاقة أعمال**: 89 × 51 ملم
- **حجم مخصص**: قابل للتخصيص

### اختصارات لوحة المفاتيح
- `Ctrl + Z`: تراجع
- `Ctrl + Y`: إعادة
- `Ctrl + C`: نسخ العنصر المحدد
- `Ctrl + V`: لصق العنصر
- `Delete`: حذف العنصر المحدد
- `Escape`: إلغاء تحديد العنصر

## 🎯 كيفية استخدام ميزات التحديد والسحب

### إضافة عنصر جديد
1. استخدم أزرار شريط الأدوات لإضافة:
   - **مربع**: انقر على أيقونة المربع
   - **دائرة**: انقر على أيقونة الدائرة
   - **نص**: انقر على أيقونة النص
   - **مثلث**: انقر على أيقونة المثلث

### تحديد وتحرير العنصر
1. **النقر للتحديد**: انقر على أي عنصر في الكانفاس
2. **علامات التحديد**: ستظهر مربعات زرقاء حول العنصر المحدد
3. **السحب للتحريك**: اسحب العنصر إلى المكان المرغوب
4. **تغيير الحجم**: اسحب من المربعات الزرقاء لتغيير الحجم
5. **الدوران**: اسحب من المربع الأخضر لتدوير العنصر

### ميزات متقدمة
- **المحاذاة للشبكة**: فعل خيار "محاذاة للشبكة" لمحاذاة تلقائية
- **قفل العنصر**: استخدم لوحة الخصائص لقفل العنصر من الحركة
- **تغيير الترتيب**: استخدم أزرار "إلى الأمام" و"إلى الخلف" في لوحة الخصائص

### نصائح للاستخدام الأمثل
- استخدم الشبكة للحصول على تصميم منتظم
- احفظ مشروعك بانتظام باستخدام زر "حفظ المشروع"
- استخدم التراجع والإعادة للتجربة بحرية
- جرب أحجام مختلفة للبطاقات من إعدادات القماش

## 🔧 الإصلاحات الأخيرة

### إصلاح مشاكل Konva
- تم إصلاح مشكلة تحميل react-konva في Next.js
- تم تحسين التحميل الديناميكي لتجنب أخطاء SSR
- تم إضافة تأخير في التحميل لضمان تهيئة React بشكل صحيح

### تحسينات الأداء
- تم تحسين تحميل المكونات لتجنب الأخطاء
- تم إزالة التحققات غير الضرورية من isKonvaLoaded
- تم تحسين معالجة الأحداث للتحديد والسحب

### ملفات التشغيل
- تم إضافة ملف `start.bat` للتشغيل السريع على Windows
- تم إضافة ملف `QUICK_START.md` مع تعليمات مبسطة

## 🔧 التخصيص والتطوير

### إضافة أشكال جديدة
1. أضف التعريف في `types/shapes.d.ts`
2. أنشئ دالة إنشاء في `lib/konvaUtils.ts`
3. أضف المعالجة في `components/editor/CanvasStage.tsx`
4. أضف الخصائص في `components/editor/PropertiesPanel.tsx`

### إضافة صيغ تصدير جديدة
1. أضف الدالة في `lib/exportUtils.ts`
2. أضف الخيار في `app/editor/page.tsx`

## 🎯 الميزات المستقبلية

- [ ] دعم رفع الصور
- [ ] قوالب جاهزة للبطاقات
- [ ] دعم الخطوط العربية المخصصة
- [ ] أدوات رسم متقدمة
- [ ] تعاون متعدد المستخدمين
- [ ] مكتبة أيقونات مدمجة
- [ ] نظام حفظ سحابي

## 🤝 المساهمة

نرحب بالمساهمات! يرجى:

1. عمل Fork للمشروع
2. إنشاء فرع للميزة الجديدة
3. تطبيق التغييرات مع اتباع معايير الكود
4. إضافة اختبارات إذا لزم الأمر
5. إرسال Pull Request

## 📄 الترخيص

هذا المشروع مرخص تحت [MIT License](LICENSE)

## 🙏 شكر خاص

- فريق Next.js للإطار الرائع
- مطوري Konva.js للمحرك القوي
- مجتمع React العربي للدعم

---

**طُور بـ ❤️ باستخدام Next.js 14**
"# aalitariq44-identity_maker_next_j" 
