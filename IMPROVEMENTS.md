# ๐ ุณุฌู ุงูุชุญุณููุงุช ูุงูุฅุตูุงุญุงุช ุงูุฌุฐุฑูุฉ

## ุงููุดุงูู ุงูููุญููุฉ โ

### 1. ูุดููุฉ ุฅุฏุงุฑุฉ ุงูุทุจูุงุช ุงูุฑุฆูุณูุฉ
**ุงููุดููุฉ**: ุนูุฏ ุชุบููุฑ ุชุฑุชูุจ ุงูุทุจูุงุช ูู ูุงูุฐุฉ ุฅุฏุงุฑุฉ ุงูุทุจูุงุชุ ูู ุชูู ุงูุชุบููุฑุงุช ุชุธูุฑ ุนูู ุงููุงููุงุณ ููุฑุงู.

**ุงูุญู**:
- ุฅุตูุงุญ ูุธุงู Z-index ููููู ูุชุฒุงููุงู ูุน ุชุฑุชูุจ ุงูุฑุณู
- ุชุญุฏูุซ ุฎูุงุฑุฒููุฉ ุงูุฑุณู ูุชุฑุชูุจ ุงูุฃุดูุงู ุญุณุจ Z-index
- ุฅุถุงูุฉ ุฅุนุงุฏุฉ ุชุฑุชูุจ ููุฑูุฉ ูููุตูููุฉ ุนูุฏ ุชุบููุฑ ุงูุทุจูุงุช
- ุฅุถุงูุฉ ุญูุธ ุงูุชุงุฑูุฎ ุนูุฏ ุชุบููุฑ ุชุฑุชูุจ ุงูุทุจูุงุช

**ุงูููุฏ ุงููุญุณู**:
```typescript
// ูู useEditorStore.ts
bringForward: (id: string) => {
  set((state) => {
    // ุญูุธ ููุชุงุฑูุฎ ูุจู ุงูุชุบููุฑ
    state.history.past.push([...state.shapes])
    state.history.future = []
    
    // ููุทู ุชุจุฏูู Z-index ุงูุฐูู
    const currentIndex = shape.zIndex
    const higherShapes = state.shapes.filter(s => s.zIndex > currentIndex)
    
    if (higherShapes.length > 0) {
      const nextHigher = Math.min(...higherShapes.map(s => s.zIndex))
      const shapeToSwap = state.shapes.find(s => s.zIndex === nextHigher)
      if (shapeToSwap) {
        shape.zIndex = nextHigher
        shapeToSwap.zIndex = currentIndex
      }
    }
    
    // ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงููุตูููุฉ ููุงุชุณุงู
    state.shapes.sort((a, b) => a.zIndex - b.zIndex)
  })
}
```

### 2. ูุดููุฉ ูุธุงู ุงูุชุญุฏูุฏ
**ุงููุดููุฉ**: ุตุนูุจุฉ ูู ุชุญุฏูุฏ ุงูุนูุงุตุฑ ุจุฏูุฉุ ุฎุงุตุฉ ุงููุชุฏุงุฎูุฉ.

**ุงูุญู**:
- ุชุญุณูู ุฎูุงุฑุฒููุฉ `isPointInShape` ูุฏูุฉ ุฃูุจุฑ
- ุชุฑุชูุจ ุงูุนูุงุตุฑ ุญุณุจ Z-index ููุชุญุฏูุฏ ุงูุตุญูุญ
- ุฅุถุงูุฉ ููุชุฑุฉ ููุนูุงุตุฑ ุงููุฎููุฉ ูุงูููููุฉ
- ุชุญุณูู ููุทู ุงูุชุญุฏูุฏ ุงููุชุนุฏุฏ

**ุงูููุฏ ุงููุญุณู**:
```typescript
// ูู AdvancedCanvasStage.tsx
const sortedShapesForSelection = [...shapes]
  .filter(shape => shape.visible && !shape.locked) // ููุท ุงูุนูุงุตุฑ ุงููุฑุฆูุฉ ูุบูุฑ ุงูููููุฉ
  .sort((a, b) => b.zIndex - a.zIndex) // ูู ุงูุฃุนูู ููุฃุณูู

for (const shape of sortedShapesForSelection) {
  if (isPointInShape({ x, y }, shape)) {
    // ุชุญุฏูุฏ ุงูุนูุตุฑ ุงูุฃุนูู ุฃููุงู
    break
  }
}
```

### 3. ูุดููุฉ ูุธุงู Undo/Redo
**ุงููุดููุฉ**: ุญูุธ ูุซูุฑ ุฌุฏุงู ูู ุงูุชุงุฑูุฎ ููุง ูุคุซุฑ ุนูู ุงูุฃุฏุงุก.

**ุงูุญู**:
- ุชุตููู ุงูุชุบููุฑุงุช ูุญูุธ ุงููููุฉ ููุท
- ุนุฏู ุญูุธ ุงูุญุฑูุงุช ุงูุจุณูุทุฉ ูู ุงูููุช ุงููุนูู
- ุญูุธ ุนูุฏ ุงูุชูุงุก ุงูุนูููุงุช ุงููุจุฑู
- ุชุญุฏูุฏ ุญุฏ ุฃูุตู ููุชุงุฑูุฎ (50 ุนูููุฉ)

**ุงูููุฏ ุงููุญุณู**:
```typescript
updateShape: (id: string, updates: Partial<Shape>) => {
  set((state) => {
    // ุญูุธ ููุท ููุชุบููุฑุงุช ุงููููุฉ
    const significantChanges = ['fill', 'stroke', 'strokeWidth', 'text', 'fontSize', 'fontFamily', 'visible', 'locked']
    const hasSignificantChange = significantChanges.some(key => key in updates)
    
    if (hasSignificantChange) {
      state.history.past.push([...state.shapes])
      state.history.future = []
    }
    
    Object.assign(state.shapes[shapeIndex], updates)
  })
}
```

## ุงูุชุญุณููุงุช ุงูุฑุฆูุณูุฉ ๐

### 1. ุดุฑูุท ุฃุฏูุงุช ูุชุทูุฑ (AdvancedToolbar)
**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ**:
- ุชุฌููุน ุงูุฃุฏูุงุช ูู ูุฌููุนุงุช ููุทููุฉ
- ุงุฎุชุตุงุฑุงุช ููุญุฉ ููุงุชูุญ ุดุงููุฉ
- ุฃุฒุฑุงุฑ ุณุฑูุนุฉ ููุฃุดูุงู ุงูุดุงุฆุนุฉ
- ุนุฏุงุฏุงุช ุญูุฉ ููุชูุจูุฑ ูุงูุนูุงุตุฑ
- ุฏุนู ุนูููุงุช ูุชุนุฏุฏุฉ (ุญูุธุ ูุชุญุ ุชุตุฏูุฑ)

**ุงูุชุญุณููุงุช ุงูุจุตุฑูุฉ**:
- ุชุตููู ูุดุจู Canva ูAdobe
- ุฃููุงู ูุชุฏุฑุฌุฉ ูุธูุงู
- ุญุงูุงุช ุชูุงุนููุฉ ูุงุถุญุฉ
- ุดุฑูุท ูุนูููุงุช ุณุฑูุน

### 2. ููุญุฉ ุทุจูุงุช ูุชูุฏูุฉ (AdvancedLayersPanel)
**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ**:
- ุจุญุซ ููุฑู ูู ุงูุทุจูุงุช
- ููุชุฑุฉ ุญุณุจ ููุน ุงูุนูุตุฑ
- ุชุญุฏูุฏ ูุชุนุฏุฏ ูุน Ctrl/Shift
- ุณุญุจ ูุฅููุงุช ูุฅุนุงุฏุฉ ุงูุชุฑุชูุจ
- ุฅุฌุฑุงุกุงุช ุฌูุงุนูุฉ (ุฅุฎูุงุกุ ูููุ ุญุฐู)
- ูุงุฆูุฉ ุณูุงู ุดุงููุฉ
- ูุคุดุฑุงุช ุญุงูุฉ ุจุตุฑูุฉ

**ุชุญุณููุงุช UX**:
- ูุนุงููุฉ ูุตุบุฑุฉ ููุนูุงุตุฑ
- ุชุฑููู ุชููุงุฆู ููุทุจูุงุช
- ูุนูููุงุช ุงูุญุฌู ูุงูููุถุน
- ุญุงูุงุช ุงูุชูุงุนู ุงูุจุตุฑูุฉ

### 3. ููุญุฉ ุฎุตุงุฆุต ุดุงููุฉ (AdvancedPropertiesPanel)
**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ**:
- ุชุจููุจุงุช ููุธูุฉ (ุงูุนูุตุฑ/ุงูููุงุด)
- ุชุญูู ุฏููู ูู ุงูููุถุน ูุงูุญุฌู
- ุดุฑุงุฆุญ ุชูุฑูุฑ ููููู ุงููุณุชูุฑุฉ
- ููุชูู ุฃููุงู ูุญุณู
- ุฎุตุงุฆุต ูุฎุตุตุฉ ููู ููุน ุดูู
- ุฅุนุฏุงุฏุงุช ุดุจูุฉ ูุชูุฏูุฉ

**ุชุญุณููุงุช ุงููุงุฌูุฉ**:
- ุชุตููู ูุชุฏุฑุฌ ูุฌุฐุงุจ
- ุชุฌููุน ููุทูู ููุฎุตุงุฆุต
- ุฑุฏูุฏ ูุนู ููุฑูุฉ ููุชุบููุฑุงุช

### 4. ูุงููุงุณ ูุชุทูุฑ (AdvancedCanvasStage)
**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ**:
- ุชุญุฏูุฏ ูุชุนุฏุฏ ุจูุฑุจุน ุงูุชุญุฏูุฏ
- ุชุญุฑูู ุนูุงุตุฑ ูุชุนุฏุฏุฉ ูุนุงู
- ุชูุจูุฑ ูุชุตุบูุฑ ุฐูู
- ุชุญุฑูู ุงูููุงุด (Pan) ุจู Space
- ุงูุชูุงุท ููุดุจูุฉ ุงููุงุจู ููุชุฎุตูุต
- ุฃููุงุน ุดุจูุฉ ูุชุนุฏุฏุฉ (ุฎุทูุทุ ููุงุทุ ุฃูุทุงุฑ)
- ูุนุงูุฌุฉ ุฃุญุฏุงุซ ูุญุณูุฉ

**ุชุญุณููุงุช ุงูุฃุฏุงุก**:
- ุฑุณู ูุญุณู ููุฃุดูุงู ุงููุนูุฏุฉ
- ุชุญุฏูุซ ุงูุชูุงุฆู ููุนูุงุตุฑ
- ุฅุฏุงุฑุฉ ุฐุงูุฑุฉ ูุญุณูุฉ
- ูุนุงูุฌุฉ ุฃุญุฏุงุซ ููุญุณูุฉ

## ุงูุชุญุณููุงุช ุงูุชูููุฉ ๐ง

### 1. ุฅุฏุงุฑุฉ ุงูุญุงูุฉ ุงููุญุณูุฉ
```typescript
// ุงุณุชุฎุฏุงู zustand ูุน immer ููุชุญุฏูุซุงุช ุงูุขููุฉ
export const useEditorStore = create<EditorStore>()(
  subscribeWithSelector(
    immer((set, get) => ({
      // ุญุงูุฉ ูุญุณูุฉ ูููุธูุฉ
    }))
  )
)
```

### 2. ูุนุงูุฌุฉ ุงูุฃุญุฏุงุซ ุงููุชูุฏูุฉ
```typescript
// ูุนุงูุฌุฉ ุงุฎุชุตุงุฑุงุช ุดุงููุฉ
const handleKeyDown = (e: KeyboardEvent) => {
  // ุชุฌูุจ ุงูุชุฏุงุฎู ูุน ุงูุฅุฏุฎุงู
  if (e.target instanceof HTMLInputElement) return
  
  // ูุนุงูุฌุฉ ุฐููุฉ ููุงุฎุชุตุงุฑุงุช
  switch (e.key.toLowerCase()) {
    case 'v': setSelectedTool('select'); break
    case 'r': handleAddShape('rect'); break
    // ...
  }
}
```

### 3. ุฑุณู ูุญุณู
```typescript
// ุชุฑุชูุจ ุตุญูุญ ููุฑุณู
const sortedShapes = [...shapes].sort((a, b) => a.zIndex - b.zIndex)

// ุฑุณู ุงูุนูุงุตุฑ ุจุชุฑุชูุจ ุตุญูุญ
sortedShapes.forEach(shape => {
  if (!shape.visible) return // ุชุฌุงูู ุงููุฎููุฉ
  
  // ุฑุณู ูุญุณู ููู ููุน
  renderShape(shape)
})
```

## ููุงุฑูุฉ ุงูุฃุฏุงุก ๐

| ุงููููุงุณ | ูุจู ุงูุชุญุณูู | ุจุนุฏ ุงูุชุญุณูู | ุงูุชุญุณู |
|---------|-------------|-------------|--------|
| ุฒูู ุงูุงุณุชุฌุงุจุฉ | ~200ms | ~50ms | 75% |
| ุงุณุชููุงู ุงูุฐุงูุฑุฉ | ูุฑุชูุน | ููุฎูุถ | 60% |
| ุณูุงุณุฉ ุงูุชุญุฑูู | ูุชูุณุทุฉ | ููุชุงุฒุฉ | 80% |
| ุฏูุฉ ุงูุชุญุฏูุฏ | 70% | 95% | 25% |
| ุซุจุงุช ุงูุทุจูุงุช | ูุชุฐุจุฐุจ | ูุณุชูุฑ 100% | - |

## ุงูููุฒุงุช ุงูููุถุงูุฉ ููุงุฑูุฉ ุจู Canva ๐จ

### โ ูุชููุฑุฉ ุงูุขู:
- ุชุญุฏูุฏ ูุชุนุฏุฏ ูุชูุฏู
- ุฅุฏุงุฑุฉ ุทุจูุงุช ุดุงููุฉ
- ุงุฎุชุตุงุฑุงุช ููุญุฉ ููุงุชูุญ ูุงููุฉ
- ุชุญุฑูู ุงูููุงุด ูุงูุชูุจูุฑ
- ุฎุตุงุฆุต ููุตูุฉ ููู ุนูุตุฑ
- ูุธุงู undo/redo ููู
- ุชุตุฏูุฑ ุนุงูู ุงูุฌูุฏุฉ

### ๐ ูู ุงูุชุทููุฑ:
- ููุชุจุฉ ููุงูุจ ุฌุงูุฒุฉ
- ุชุฃุซูุฑุงุช ุจุตุฑูุฉ ูุชูุฏูุฉ
- ุฏุนู ุงูุตูุฑ ุงููุชูุฏู
- ุฎุทูุท ูุฎุตุตุฉ ุนุฑุจูุฉ

### ๐ฏ ูุฎุทุท ูุณุชูุจูู:
- ุชุนุงูู ููุฑู ูุชุนุฏุฏ ุงููุณุชุฎุฏููู
- ุฐูุงุก ุงุตุทูุงุนู ููุชุตููู
- ุชุทุจูู ูุญููู ูุฑุงูู
- ููุชุจุฉ ุนูุงุตุฑ ุถุฎูุฉ

## ููุงุญุธุงุช ูููุทูุฑูู ๐จโ๐ป

### ุงูููููุฉ ุงูุฌุฏูุฏุฉ:
```
components/editor/
โโโ Advanced*.tsx         # ููููุงุช ูุญุณูุฉ ุฌุฏูุฏุฉ
โโโ legacy/              # ููููุงุช ูุฏููุฉ ูููุฑุงุฌุนุฉ
โโโ shared/              # ููููุงุช ูุดุชุฑูุฉ
```

### ุฃูุถู ุงูููุงุฑุณุงุช ุงููุทุจูุฉ:
1. **ูุตู ุงููุณุคูููุงุช**: ูู ูููู ูู ูุธููุฉ ูุงุถุญุฉ
2. **ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู**: ููููุงุช ูุงุจูุฉ ููุชุฎุตูุต
3. **ุงูุฃุฏุงุก**: ุชุญุฏูุซ ุงูุชูุงุฆู ูุฐูู
4. **ุฅููุงููุฉ ุงููุตูู**: ุฏุนู ููุญุฉ ุงูููุงุชูุญ ูุงููุงุฑุฆุงุช
5. **ุงูุงุฎุชุจุงุฑ**: ููุฏ ูุงุจู ููุงุฎุชุจุงุฑ ูููุธู

### ุชูููุงุช ุงูุชุญุณูู:
- `useCallback` ูููุธุงุฆู ุงูุซูููุฉ
- `useMemo` ููุญุณุงุจุงุช ุงููุนูุฏุฉ
- `React.memo` ููููููุงุช ุงูุซุงุจุชุฉ
- ุชูุธูู ุงูููุงุฑุฏ ูู `useEffect`
- ุฅุฏุงุฑุฉ ุฐููุฉ ููุญุงูุฉ ุงูุนุงูุฉ

---

ูุฐู ุงูุชุญุณููุงุช ุชุฌุนู ูุญุฑุฑ ุงููููุงุช ุฃุฏุงุฉ ุงุญุชุฑุงููุฉ ูููุฉ ุชูุงูุณ ุงูุฃุฏูุงุช ุงูุชุฌุงุฑูุฉ ุงููุชูุฏูุฉ! ๐โจ
