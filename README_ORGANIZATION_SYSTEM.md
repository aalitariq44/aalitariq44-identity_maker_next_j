# نظام إدارة هويات المؤسسات والفرق 🏢👥

## نظرة عامة
تم تطوير التطبيق ليصبح نظاماً متكاملاً لإدارة هويات المؤسسات والفرق. يمكن للمؤسسات (مدارس، شركات، جهات حكومية) إدارة أعضائها وإنتاج هويات جماعية بسهولة.

## 🚀 الميزات الجديدة

### 1. **إدارة المؤسسات**
- ✅ إنشاء وتحرير معلومات المؤسسة الكاملة
- ✅ دعم أنواع مختلفة من المؤسسات (مدارس، شركات، جهات حكومية، منظمات غير ربحية)
- ✅ حفظ معلومات التواصل والموقع
- ✅ ربط المؤسسة بحساب المستخدم بشكل آمن

### 2. **إدارة الأعضاء والفرق**
- ✅ إضافة أعضاء فردية أو مجمعة
- ✅ دعم أنواع مختلفة من الأعضاء:
  - 🎓 **الطلاب**: اسم، صف، فصل، رقم طالب
  - 👔 **الموظفين**: اسم، قسم، منصب، رقم موظف
  - 👨‍🏫 **المعلمين**: اسم، قسم، تخصص
  - 👨‍💼 **المديرين**: اسم، منصب، صلاحيات
- ✅ معلومات تفصيلية لكل عضو (هاتف، إيميل، عنوان، تاريخ ميلاد)
- ✅ معلومات إضافية (فصيلة دم، جهة اتصال طارئ)
- ✅ توليد أرقام عضوية تلقائياً
- ✅ البحث والفلترة المتقدمة

### 3. **نظام القوالب المتقدم**
- ✅ إنشاء قوالب مخصصة لكل نوع من الأعضاء
- ✅ تحديد الحقول المتغيرة في القالب
- ✅ حفظ معاينات مصغرة للقوالب
- ✅ مكتبة قوالب جاهزة

### 4. **الإنتاج المجمع للهويات**
- ✅ إنتاج هويات لمجموعة من الأعضاء دفعة واحدة
- ✅ اختيار قالب مخصص لكل مجموعة
- ✅ دعم تصدير بصيغ متعددة (PNG, PDF, JPG)
- ✅ تتبع حالة الإنتاج والتقدم
- ✅ تحميل النتائج بشكل منظم

### 5. **لوحة التحكم والإحصائيات**
- ✅ نظرة عامة شاملة على المؤسسة
- ✅ إحصائيات الأعضاء والقوالب
- ✅ توزيع الأعضاء حسب النوع
- ✅ معلومات عن الدفعات المنتجة
- ✅ واجهة سهلة الاستخدام

## 🛠️ التقنيات المستخدمة

### Frontend
- **Next.js 15** - إطار عمل React متقدم
- **TypeScript** - للكتابة الآمنة
- **Tailwind CSS** - للتصميم السريع والمرن
- **Lucide React** - مكتبة أيقونات حديثة
- **Konva.js** - للرسم والتصميم المتقدم

### Backend & Database
- **Firebase Authentication** - نظام مصادقة آمن
- **Firestore Database** - قاعدة بيانات NoSQL
- **Firebase Storage** - تخزين الملفات والصور
- **Firebase Security Rules** - حماية البيانات

## 📁 هيكل المشروع

```
src/
├── app/                          # صفحات التطبيق
│   ├── organization/            # صفحات إدارة المؤسسات
│   │   ├── setup/               # إعداد المؤسسة
│   │   └── [id]/               # صفحات المؤسسة المحددة
│   │       ├── dashboard/       # لوحة التحكم
│   │       ├── members/         # إدارة الأعضاء
│   │       ├── templates/       # إدارة القوالب
│   │       └── batch/          # الإنتاج المجمع
│   ├── editor/                  # محرر التصميم
│   ├── auth/                    # المصادقة
│   └── my-designs/             # تصاميمي
├── components/                  # مكونات UI
│   ├── auth/                    # مكونات المصادقة
│   ├── common/                  # مكونات مشتركة
│   ├── editor/                  # مكونات المحرر
│   └── organization/           # مكونات المؤسسات
├── lib/                        # خدمات ووظائف مساعدة
│   ├── firebase.ts            # إعداد Firebase
│   ├── auth.ts                # خدمات المصادقة
│   ├── firestore.ts           # خدمات قاعدة البيانات
│   └── organizationService.ts # خدمات المؤسسات
├── types/                      # تعريفات TypeScript
│   ├── shapes.ts              # أنواع الأشكال والتصميم
│   └── organization.ts        # أنواع المؤسسات والأعضاء
└── hooks/                      # React Hooks مخصصة
    └── useAuth.tsx            # Hook المصادقة
```

## 🔧 كيفية الاستخدام

### 1. **بداية سريعة**
```bash
# استنساخ المشروع
git clone [repository-url]

# تثبيت المكتبات
npm install

# تشغيل المشروع
npm run dev
```

### 2. **إعداد Firebase**
1. أنشئ مشروع Firebase جديد
2. فعّل Authentication (Email/Password + Google)
3. أنشئ Firestore Database
4. انسخ معلومات التكوين إلى `src/lib/firebase.ts`
5. ضع قواعد الأمان من `ORGANIZATION_SYSTEM.md`

### 3. **سير العمل المقترح**

#### للمؤسسات التعليمية (المدارس):
1. **إعداد المدرسة**
   - إدخال اسم المدرسة وعنوانها
   - إضافة شعار المدرسة
   - تحديد معلومات التواصل

2. **إضافة الطلاب**
   - إضافة طلاب حسب الصفوف
   - تحديد الفصول والشعب
   - إدخال أرقام الطلاب

3. **إنشاء قوالب الهويات**
   - قالب للطلاب
   - قالب للمعلمين
   - قالب للإداريين

4. **الإنتاج المجمع**
   - اختيار طلاب صف معين
   - تطبيق القالب المناسب
   - تصدير هويات الصف كاملاً

#### للشركات:
1. **إعداد الشركة**
   - إدخال اسم الشركة ومعلوماتها
   - إضافة الشعار والموقع

2. **إضافة الموظفين**
   - تصنيف حسب الأقسام
   - تحديد المناصب والمسؤوليات
   - إدخال أرقام الموظفين

3. **قوالب متنوعة**
   - قالب للموظفين العاديين
   - قالب للمديرين
   - قالب للزوار

4. **إنتاج حسب القسم**
   - اختيار قسم معين
   - تطبيق القالب المناسب
   - تصدير هويات القسم

## 🎨 مثال عملي: مدرسة الأمل الثانوية

### الخطوة 1: إعداد المدرسة
```typescript
const schoolData = {
  name: "مدرسة الأمل الثانوية",
  nameEnglish: "Al-Amal High School",
  type: "school",
  address: "شارع الملك فهد، حي النزهة",
  city: "الرياض",
  country: "السعودية",
  phone: "+966 11 234 5678",
  email: "info@alamal-school.edu.sa",
  establishedYear: 1995
}
```

### الخطوة 2: إضافة الطلاب
```typescript
const students = [
  {
    firstName: "أحمد",
    lastName: "محمد",
    memberType: "student",
    grade: "الثالث الثانوي",
    className: "أ",
    section: "1",
    dateOfBirth: "2005-03-15",
    // ... معلومات أخرى
  },
  // المزيد من الطلاب...
]
```

### الخطوة 3: إنشاء قالب
- تصميم قالب هوية طالب
- إضافة شعار المدرسة
- تحديد مواضع البيانات المتغيرة (الاسم، الصف، الصورة)

### الخطوة 4: الإنتاج المجمع
- اختيار طلاب الثالث الثانوي (أ)
- تطبيق قالب الطلاب
- تصدير 30 هوية دفعة واحدة بصيغة PDF

## 🔒 الأمان والخصوصية

### حماية البيانات
- **عزل المؤسسات**: كل مؤسسة معزولة تماماً عن الأخرى
- **التحكم في الوصول**: المالك فقط يمكنه الوصول لبيانات مؤسسته
- **تشفير البيانات**: جميع البيانات محمية بواسطة Firebase
- **النسخ الاحتياطي**: البيانات محفوظة في السحابة بأمان

### قواعد الأمان
```javascript
// مثال على قواعد Firestore
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /organizations/{orgId} {
      allow read, write: if request.auth != null && 
                           request.auth.uid == resource.data.userId;
    }
    
    match /members/{memberId} {
      allow read, write: if request.auth != null && 
                           isOrganizationOwner(resource.data.organizationId);
    }
  }
}
```

## 📊 الإحصائيات والتقارير

### لوحة التحكم تشمل:
- إجمالي عدد الأعضاء
- الأعضاء النشطون
- توزيع الأعضاء حسب النوع
- عدد القوالب المتاحة
- عدد دفعات الإنتاج
- آخر نشاط في المؤسسة

### تقارير مفصلة:
- قائمة بجميع الأعضاء مع تفاصيلهم
- إحصائيات الإنتاج الشهرية
- معدلات استخدام القوالب
- تقارير الأخطاء والمشاكل

## 🚀 التطوير المستقبلي

### المرحلة الثانية:
- [ ] **الأدوار والصلاحيات**: إضافة مستويات وصول مختلفة
- [ ] **التقارير المتقدمة**: تقارير تفصيلية وإحصائيات
- [ ] **التكامل مع أنظمة أخرى**: ربط مع أنظمة إدارة المدارس
- [ ] **استيراد من ملفات Excel**: رفع قوائم الطلاب من ملفات Excel
- [ ] **إشعارات الإنتاج**: تنبيهات عند اكتمال الإنتاج

### المرحلة الثالثة:
- [ ] **التطبيق المحمول**: نسخة للهواتف الذكية
- [ ] **الطباعة المباشرة**: ربط مع طابعات البطاقات
- [ ] **التوقيع الرقمي**: إضافة توقيعات رقمية للهويات
- [ ] **التحقق من الهوية**: نظام للتحقق من صحة الهويات
- [ ] **API للتكامل**: واجهة برمجية للتكامل مع أنظمة أخرى

## 🤝 المساهمة والدعم

### للمطورين:
- Fork المشروع
- أنشئ branch للميزة الجديدة
- اختبر التغييرات
- أرسل Pull Request

### للمستخدمين:
- أبلغ عن الأخطاء في Issues
- اقترح ميزات جديدة
- شارك تجربتك مع النظام

## 📝 الرخصة

هذا المشروع مرخص تحت رخصة MIT - انظر ملف [LICENSE](LICENSE) للتفاصيل.

## 📞 التواصل والدعم

- **البريد الإلكتروني**: support@identity-maker.com
- **الموقع الإلكتروني**: [www.identity-maker.com](http://www.identity-maker.com)
- **الوثائق**: [docs.identity-maker.com](http://docs.identity-maker.com)

---

<div align="center">
  <h3>🌟 ساعد في تطوير النظام بنشر المشروع ⭐</h3>
  <p>تم تطوير هذا النظام بحب لخدمة المؤسسات والمجتمع</p>
</div>
