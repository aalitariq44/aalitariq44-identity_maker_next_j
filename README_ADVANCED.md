# محرر الهويات المتقدم - Identity Maker Advanced

محرر قوي ومتطور لتصميم بطاقات الهوية والبطاقات التعريفية بواجهة عربية حديثة ومميزات احترافية مماثلة لأدوات التصميم العالمية.

## 🌟 الميزات الجديدة والمحسنة - التحديث الشامل

### 🎨 أدوات التصميم المتقدمة

#### 🔧 شريط الأدوات الشامل
- **أدوات التحديد**: تحديد، يد، نقل مع اختصارات لوحة المفاتيح (V, H, M)
- **الأشكال الأساسية**: مستطيل (R), دائرة (O), مثلث مع إعدادات متقدمة
- **النصوص**: محرر نصوص متطور مع خطوط متعددة (T)
- **الصور**: دعم كامل للصور مع أدوات التحرير والتصفية (P)
- **رموز QR والباركود**: مولد تلقائي للرموز (Q, B)
- **أداة الرسم**: رسم حر بفرشاة قابلة للتخصيص

#### 🎯 نظام المحاذاة والتوزيع
- **المحاذاة الأفقية**: يسار، وسط، يمين مع دقة عالية
- **المحاذاة العمودية**: أعلى، وسط، أسفل
- **التوزيع الذكي**: توزيع أفقي وعمودي متساوي للعناصر المتعددة
- **المحاذاة للقماش**: محاذاة العناصر لحواف القماش
- **إرشادات ذكية**: خطوط إرشاد تلقائية للمحاذاة المثالية
- **أدوات الطبقات**: إحضار للمقدمة، إرسال للخلفية، ترتيب متقدم

#### � نظام التشبيك والإرشادات المتطور
- **شبكة قابلة للتخصيص**: أحجام وألوان متعددة مع تحكم دقيق
- **الالتصاق بالشبكة**: تموضع دقيق للعناصر مع مؤشرات بصرية
- **مساطر القماش**: مساطر أفقية وعمودية بوحدات مختلفة
- **خطوط المركز**: إرشادات لقاعدة الثلاثة والمحاذاة المركزية
- **مؤشرات الالتصاق**: إرشادات بصرية ذكية للدقة العالية
- **شبكة ديناميكية**: تتكيف مع مستوى التكبير

### 📏 إدارة الأحجام المتقدمة

#### 🎯 محرر الأحجام المخصص
- **أحجام محددة مسبقاً**: بطاقة ماستركارد، هوية مدرسية، بطاقة أعمال، هوية موظف
- **تحويل الوحدات**: بكسل، ملليمتر، سنتيمتر، بوصة مع دقة عالية
- **محافظة على النسبة**: حفظ نسب الأبعاد تلقائياً أو يدوياً
- **معاينة مباشرة**: رؤية الحجم الجديد قبل التطبيق
- **تحسينات للطباعة**: إرشادات DPI ونصائح الطباعة المهنية
- **قوالب مقاسات**: مقاسات عالمية ومحلية للبطاقات

#### 🔄 تبديل الاتجاه الذكي
- **تبديل سريع**: أفقي ↔ عمودي بضغطة واحدة
- **حفظ المحتوى**: الحفاظ على العناصر وأماكنها عند التبديل
- **تحديث تلقائي**: إعادة ترتيب العناصر تلقائياً للمقاس الجديد
- **تحذيرات ذكية**: تنبيهات عند تجاوز حدود القماش

### 🖼️ نظام الصور المتطور

#### 📤 رفع الصور المحسن
- **سحب وإفلات**: رفع مباشر بالسحب من سطح المكتب
- **أنواع ملفات متعددة**: JPG, PNG, GIF, WEBP, SVG
- **مكتبة صور جاهزة**: صور احترافية مجانية منظمة بفئات
- **معاينة سريعة**: عرض الصور قبل الإضافة مع معلومات الملف
- **ضغط تلقائي**: تحسين حجم الملفات للأداء الأمثل
- **بحث في الصور**: بحث ذكي في مكتبة الصور

#### 🎛️ أدوات تحرير الصور المتقدمة
- **تصفية متقدمة**: سطوع، تباين، تشبع، جاما
- **تأثيرات بصرية**: ضبابية، سيبيا، رمادي، عكس الألوان
- **اقتصاص ذكي**: تحديد المنطقة المطلوبة بدقة
- **زوايا مستديرة**: تخصيص انحناء الزوايا بشكل مستقل
- **طبقات الشفافية**: تحكم دقيق في الشفافية
- **حدود وظلال**: إضافة حدود ملونة وظلال واقعية

### 📚 مكتبة القوالب الشاملة

#### 🎨 قوالب احترافية متنوعة
- **فئات شاملة**: مدرسي، أعمال، طبي، رياضي، حكومي، إبداعي، شخصي
- **تصميمات جاهزة**: أكثر من 50 قالب محترف عالي الجودة
- **قوالب مميزة**: تصميمات مختارة بعناية من مصممين محترفين
- **معاينة تفاعلية**: عرض تفصيلي مع إمكانية التجربة قبل الاستخدام
- **تخصيص سريع**: تعديل فوري على القوالب دون فقدان التصميم
- **قوالب عربية**: تصميمات تراعي الثقافة العربية والخطوط العربية

#### 🔍 نظام البحث والتصفية المتقدم
- **بحث ذكي**: بحث بالكلمات المفتاحية والوصف
- **تصفية متعددة**: حسب الفئة، اللون، الحجم، الاستخدام
- **المفضلة**: حفظ القوالب المفضلة للوصول السريع
- **الأحدث**: عرض آخر القوالب المضافة
- **تقييمات**: نظام تقييم وتعليقات للقوالب
- **مشاركة**: مشاركة القوالب المخصصة

### 💾 نظام الحفظ الذكي

#### 🔄 الحفظ التلقائي المتطور
- **حفظ دوري**: حفظ تلقائي كل 30 ثانية قابل للتخصيص
- **حفظ قبل الإغلاق**: حماية شاملة من فقدان البيانات
- **استعادة المشاريع**: استعادة العمل المحفوظ تلقائياً مع سجل التغييرات
- **حالة الحفظ**: مؤشر بصري واضح لحالة الحفظ
- **تحكم متقدم**: إمكانية تشغيل/إيقاف الحفظ التلقائي لكل مشروع
- **نسخ متعددة**: حفظ نسخ متعددة بالتاريخ والوقت

#### 💿 الحفظ اليدوي والتصدير
- **حفظ محلي**: حفظ كملف JSON في التخزين المحلي
- **حفظ كملف**: تصدير كملف للتحميل
- **أسماء ذكية**: أسماء ملفات تلقائية بالتاريخ والمشروع
- **استيراد سريع**: تحميل المشاريع المحفوظة بالسحب والإفلات
- **نسخ احتياطية**: إنشاء نسخ احتياطية تلقائية
- **تصدير متقدم**: PDF عالي الجودة، PNG شفاف، JPG محسن

### ⌨️ اختصارات لوحة المفاتيح الشاملة

#### 🎯 اختصارات الأدوات
- `V` - أداة التحديد (Selection Tool)
- `H` - أداة اليد (Hand Tool)
- `M` - أداة النقل (Move Tool)
- `R` - إضافة مستطيل (Rectangle)
- `O` - إضافة دائرة (Circle)
- `T` - إضافة نص (Text)
- `P` - إضافة صورة شخصية (Profile Image)
- `Q` - إضافة رمز QR (QR Code)
- `B` - أداة الفرشاة/الرسم (Brush)
- `E` - أداة الممحاة (Eraser)

#### 📋 اختصارات التحرير المتقدمة
- `Ctrl+C` - نسخ العناصر المحددة
- `Ctrl+X` - قص العناصر المحددة
- `Ctrl+V` - لصق العناصر
- `Ctrl+D` - تكرار العناصر المحددة
- `Ctrl+A` - تحديد جميع العناصر
- `Ctrl+Z` - تراجع (Undo)
- `Ctrl+Y` / `Ctrl+Shift+Z` - إعادة (Redo)
- `Delete` / `Backspace` - حذف العناصر المحددة
- `Escape` - إلغاء التحديد

#### 🔍 اختصارات العرض والتكبير
- `Ctrl++` - تكبير القماش
- `Ctrl+-` - تصغير القماش
- `Ctrl+0` - ملائمة القماش للشاشة
- `Ctrl+1` - عرض بالحجم الطبيعي (100%)
- `Space + Mouse Drag` - تحريك القماش (Pan)
- `[` - تصغير حجم الفرشاة
- `]` - تكبير حجم الفرشاة

#### ⚡ اختصارات التحريك والترتيب
- `Arrow Keys` - تحريك دقيق (1 بكسل)
- `Shift + Arrow Keys` - تحريك سريع (10 بكسل)
- `Ctrl+]` - إحضار للمقدمة
- `Ctrl+[` - إرسال للخلفية
- `Ctrl+Shift+]` - تحريك للأمام
- `Ctrl+Shift+[` - تحريك للخلف

### 🎨 أدوات الرسم الحر المتطورة

#### 🖌️ فرش متنوعة ومتخصصة
- **فرشاة عادية**: للرسم الحر والتصميم اليدوي
- **ممحاة ذكية**: لإزالة أجزاء من الرسم بدقة
- **قلم رصاص**: رسم بتأثير القلم الرصاص
- **فرشاة ناعمة**: حواف ناعمة ومتدرجة
- **خطوط مستقيمة**: رسم خطوط دقيقة ومستقيمة
- **أشكال هندسية**: دوائر ومستطيلات وخطوط سريعة

#### 🎨 تخصيص الفرشاة المتقدم
- **أحجام متدرجة**: من 1 إلى 50 بكسل مع تحكم دقيق
- **ألوان لانهائية**: منتقي ألوان متقدم مع HSL وRGB
- **درجة الشفافية**: تحكم من 0% إلى 100%
- **صلابة الحواف**: من ناعم إلى حاد
- **معاينة مباشرة**: رؤية شكل الفرشاة قبل الرسم
- **ضغط الفرشاة**: محاكاة ضغط القلم الرقمي

#### ✏️ أدوات الرسم التفاعلية
- **رسم بالماوس**: دعم كامل للماوس ولوحة اللمس
- **دعم القلم الرقمي**: حساسية للضغط والميل
- **تنعيم الخطوط**: تنعيم تلقائي للرسمات
- **تحكم في السرعة**: رسم مختلف حسب سرعة الحركة
- **أدوات التصحيح**: تراجع محدود للرسمات

### 📊 إدارة الطبقات المتقدمة

#### 🏗️ نظام الطبقات الاحترافي
- **ترتيب بالسحب**: إعادة ترتيب الطبقات بالسحب والإفلات
- **إظهار/إخفاء**: تحكم سريع في رؤية الطبقات
- **قفل/إلغاء قفل**: حماية الطبقات من التعديل العرضي
- **تسمية مخصصة**: أسماء وصفية للطبقات
- **معاينة مصغرة**: عرض سريع لمحتوى كل طبقة
- **مؤشرات الحالة**: رموز للقفل والإخفاء والتحديد

#### ⚡ أدوات الطبقات السريعة
- **تحديد متعدد**: Ctrl+Click للتحديد المتعدد
- **عمليات مجمعة**: إخفاء، إظهار، قفل، حذف مجموعات
- **بحث في الطبقات**: بحث سريع بالاسم أو النوع
- **فلترة الطبقات**: عرض طبقات محددة فقط
- **تجميع الطبقات**: إنشاء مجموعات منطقية
- **نسخ الطبقات**: نسخ طبقات مع كامل خصائصها

#### 🎛️ إدارة Z-Index المتقدمة
- **إحضار للمقدمة**: نقل للمستوى الأعلى
- **إرسال للخلفية**: نقل للمستوى الأسفل
- **تحريك للأمام**: خطوة واحدة للأمام
- **تحريك للخلف**: خطوة واحدة للخلف
- **ترقيم الطبقات**: عرض رقم الطبقة في الترتيب
- **معاينة الترتيب**: رؤية ترتيب الطبقات بصرياً

### 🎛️ خصائص العناصر التفصيلية

#### 🎨 خصائص المظهر المتقدمة
- **ألوان متدرجة**: تدرجات خطية ودائرية
- **ألوان صافية**: منتقي ألوان دقيق مع حفظ الألوان
- **حدود متطورة**: سمك ولون ونمط الحدود
- **شفافية متدرجة**: تأثيرات شفافية متقدمة
- **ظلال واقعية**: ظلال ثلاثية الأبعاد قابلة للتخصيص
- **تأثيرات بصرية**: توهج، انعكاس، تشويه

#### 📐 خصائص الموضع والتحويل
- **الإحداثيات الدقيقة**: X, Y بالبكسل أو الوحدات
- **الأبعاد المخصصة**: عرض وارتفاع بدقة عالية
- **زوايا الدوران**: دوران دقيق بالدرجات
- **نقطة المركز**: تحديد نقطة مركز الدوران
- **التحجيم**: تكبير وتصغير مع حفظ النسب
- **التميل**: تأثيرات الميل والانحراف

#### 🔤 خصائص النصوص المتطورة
- **خطوط متعددة**: دعم الخطوط العربية والإنجليزية
- **أحجام مرنة**: من 8pt إلى 200pt
- **تنسيق النص**: غامق، مائل، تحته خط
- **محاذاة النص**: يسار، وسط، يمين، ضبط
- **تباعد الأسطر**: تحكم في المسافة بين الأسطر
- **تباعد الأحرف**: تحكم في المسافة بين الأحرف

## 🛠️ التقنيات المستخدمة

- **Next.js 14** - إطار العمل الرئيسي
- **TypeScript** - للبرمجة الآمنة
- **Zustand** - لإدارة الحالة
- **Tailwind CSS** - للتصميم
- **Lucide React** - للأيقونات
- **HTML5 Canvas** - للرسم والتفاعل
- **jsPDF** - لتصدير PDF
- **html2canvas** - لتصدير الصور

## 📦 التثبيت والتشغيل

```bash
# استنساخ المشروع
git clone [repository-url]
cd identity_maker_next_js

# تثبيت التبعيات
npm install

# تشغيل الخادم التطويري
npm run dev
```

## 🎮 كيفية الاستخدام

### الأساسيات
1. **إضافة عناصر**: استخدم الأزرار في شريط الأدوات أو الاختصارات
2. **تحديد العناصر**: انقر على العنصر أو استخدم مربع التحديد
3. **تحريك العناصر**: اسحب العناصر المحددة
4. **تغيير الحجم**: اسحب المقابض حول العنصر المحدد
5. **تدوير**: اسحب المقبض الأخضر فوق العنصر

### الميزات المتقدمة
- **تحديد متعدد**: Ctrl+Click لإضافة عناصر للتحديد
- **تحديد مجال**: اسحب لرسم مربع تحديد
- **تحريك القماش**: اضغط Space واسحب
- **تكبير/تصغير**: استخدم أزرار التكبير أو عجلة الماوس
- **إدارة طبقات**: استخدم لوحة الطبقات لإعادة الترتيب والتحكم

### التخصيص
- **الألوان**: استخدم منتقي الألوان في لوحة الخصائص
- **النصوص**: غيّر المحتوى والخط والحجم
- **الشبكة**: فعّل الشبكة والتقاط إليها من إعدادات القماش
- **الخلفية**: غيّر لون خلفية القماش

## 📁 هيكل المشروع

```
src/
├── app/
│   ├── page.tsx              # الصفحة الرئيسية
│   └── editor/
│       └── page.tsx          # صفحة المحرر
├── components/
│   └── editor/
│       ├── AdvancedToolbar.tsx        # شريط الأدوات المتطور
│       ├── AdvancedLayersPanel.tsx    # لوحة الطبقات المتطورة
│       ├── AdvancedPropertiesPanel.tsx # لوحة الخصائص الشاملة
│       ├── AdvancedCanvasStage.tsx    # الكانفاس المتطور
│       └── ...               # مكونات أخرى
├── store/
│   └── useEditorStore.ts     # إدارة حالة المحرر
├── types/
│   └── shapes.ts             # أنواع البيانات
├── lib/
│   ├── konvaUtils.ts         # أدوات الرسم
│   └── exportUtils.ts        # أدوات التصدير
└── ...
```

## 🔄 مقارنة مع الإصدار السابق

| الميزة | الإصدار السابق | الإصدار الجديد |
|--------|----------------|----------------|
| إدارة الطبقات | مشكلة في التزامن | متزامنة 100% مع الكانفاس |
| التحديد | أساسي | متقدم مع تحديد متعدد |
| التفاعل | محدود | شامل مع اختصارات |
| الأداء | متوسط | محسن بشكل كبير |
| سهولة الاستخدام | جيدة | ممتازة مثل Canva |
| الميزات | أساسية | متقدمة ومهنية |

## 🚀 الميزات المستقبلية المخططة

- [ ] **طبقات متقدمة**: مجموعات، قفل الطبقات
- [ ] **تأثيرات بصرية**: ظلال، توهج، شفافية متدرجة
- [ ] **قوالب جاهزة**: مكتبة قوالب بطاقات هوية
- [ ] **تعاون فوري**: تحرير متعدد المستخدمين
- [ ] **تصدير متقدم**: SVG، PDF عالي الجودة
- [ ] **استيراد الصور**: دعم سحب وإفلات للصور
- [ ] **خطوط مخصصة**: دعم الخطوط العربية والإنجليزية
- [ ] **رسم حر**: أداة الرسم اليدوي
- [ ] **طباعة مباشرة**: إعداد الطباعة والمعاينة

## 🐛 الإصلاحات في هذا الإصدار

1. **مشكلة ترتيب الطبقات**: تم إصلاح عدم تطابق ترتيب الطبقات مع الرسم
2. **مشكلة التحديد**: تحسين دقة تحديد العناصر المتداخلة
3. **مشكلة الأداء**: تحسين الرسم والتفاعل للاستجابة السريعة
4. **مشكلة التاريخ**: إصلاح نظام Undo/Redo ليعمل بشكل مثالي
5. **مشكلة التكبير**: تحسين جودة الرسم مع التكبير

## 📝 الملاحظات التقنية

- استخدام `zustand` مع `immer` لإدارة حالة معقدة وآمنة
- تحسين الأداء باستخدام `useCallback` و `useMemo`
- رسم محسن باستخدام HTML5 Canvas المحلي بدلاً من Konva للتحكم الكامل
- دعم التفاعل المتقدم مع الكانفاس
- إدارة ذكية للذاكرة وتنظيف الموارد

## 🤝 المساهمة

نرحب بالمساهمات! يرجى اتباع الخطوات التالية:

1. Fork المشروع
2. إنشاء فرع للميزة الجديدة
3. تطوير التحسين أو الإضافة
4. اختبار التغييرات
5. إرسال Pull Request

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT - راجع ملف [LICENSE](LICENSE) للتفاصيل.

---

تم تطوير هذا المشروع بعناية ليكون أداة احترافية لتصميم بطاقات الهوية مع واجهة سهلة الاستخدام وميزات متقدمة تنافس أدوات التصميم التجارية. 🎨✨
